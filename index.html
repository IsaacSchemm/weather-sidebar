<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Weather</title>
    <link rel="stylesheet" href="weather.css" type="text/css" />
    <link rel="stylesheet" href="native.css" type="text/css" />
    <link rel="stylesheet" href="compact-dark.css" type="text/css" />
    <link rel="stylesheet" href="compact-light.css" type="text/css" />
    <link rel="stylesheet" href="modern.css" type="text/css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/native-promise-only/0.8.1/npo.js" integrity="sha256-o/UXdF4sFrbgV5UCIWF5ca7VMLDdplhzA4knJ4nFsc0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.js" integrity="sha256-/jZqCQrAZxcboc/rOOI54YFU6KVLAi/Zvs6IG0xVXyk=" crossorigin="anonymous"></script>
    <script src="fromcodepoint.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js" integrity="sha256-owX7sroiO/O1a7h3a4X29A1g3QgqdNvijRQ7V5TH45M=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js" integrity="sha256-1hjUhpc44NwiNg8OwMu2QzJXhD8kcj+sJA3aCQZoUjg=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.13/moment-timezone-with-data-2012-2022.min.js" integrity="sha256-+5qLxtbk4c2md6Wr70zMmahTHwH+CoFueQVQcRRSusg=" crossorigin="anonymous"></script>
    <script src="main.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            if (!window.ko) {
                document.body.innerHTML = "Could not load required scripts.";
            } else {
                var viewModel = new WeatherViewModel();
                ko.applyBindings(viewModel, document.body);

                var elements = document.querySelectorAll("#setup, #weather");
                for (var i = 0; i < elements.length; i++) {
                    elements[i].style.display = "";
                }
            }
        };
    </script>
</head>
<body data-bind="attr: { class: theme }">
    <noscript>
        This page requires JavaScript to be enabled.
    </noscript>
    <div id="setup" style="display: none" data-bind="with: settingsModel">
        <label><input id="twelveHourTime" data-bind="checked: twelveHourTime" type="checkbox" /> Use a 12-hour clock</label>
        <label><input id="useLocationTime" data-bind="checked: useLocationTime" type="checkbox" /> Use the chosen location's time zone</label>
        <hr />
        <label>Default location</label>
        <label class="latlng">Latitude: <input id="latitude" data-bind="value: latitude" type="number" step="any" /></label>
        <label class="latlng">Longitude: <input id="longitude" data-bind="value: longitude" type="number" step="any" /></label>
        <label data-bind="text: locationMessage"></label>
        <button id="getCurrentLocation" data-bind="click: getCurrentLocation">Detect</button>
        <label><input id="useGeolocation" data-bind="checked: useGeolocation" type="checkbox" /> Use my current location instead if possible</label>
        <hr />
        <label>
            Theme:
            <select data-bind="value: theme">
                <option value="native">Native</option>
                <option value="compact-light">Compact Light</option>
                <option value="compact-dark">Compact Dark</option>
                <option value="modern">Suite Modern</option>
            </select>
        </label>
        <hr />
        <div>
            <button id="resetSettings" data-bind="click: resetSettings">Reset</button>
            <button id="cancel" data-bind="click: saveSettings">Cancel</button>
            <button id="saveSettings" data-bind="click: saveSettings">Save</button>
        </div>
    </div>
    <div id="weather" style="display: none" data-bind="if: !settingsModel()">
        <div data-bind="text: error"></div> 
        <div data-bind="if: currentLatitude() && currentLongitude()">
            Your location:
            <a id="mapLink" href="#" target="_blank" data-bind="attr: { href: mapLink }">
                <span data-bind="text: currentLatitudeDisplay"></span>,
                <span data-bind="text: currentLongitudeDisplay"></span>
            </a>
        </div>
        <hr />
        <div id="alerts" data-bind="foreach: alerts">
            <div data-bind="attr: { class: severity }">
                <a href="#" target="_blank" data-bind="text: title, attr: { href: uri }"></a>
            </div>
        </div>
        <button data-bind="click: updateForecast">Refresh</button>
        <!-- ko if: temperature() != null -->
        <div id="currentTime" data-bind="text: time">
            12:00 PM
        </div>
        <div id="currentTemp" data-bind="text: temperature">
            00&deg;
        </div>
        <div id="currentDesc" data-bind="text: description">
            Clear
        </div>
        <hr />
        <h1>Hourly forecast</h1>
        <table id="hourly" data-bind="foreach: hourlyForecast">
            <tr>
                <td class="time" data-bind="text: time">4:00 AM</td>
                <td class="temp" data-bind="text: temp">38&deg;</td>
                <td class="icon" data-bind="text: icon">&#9729;</td>
                <td class="summary" data-bind="text: summary">Cloudy</td>
                <td class="precipProbability" data-bind="text: precipProbability">10%</td>
            </tr>
        </table>
        <!-- /ko -->
        <hr />
        <div>
            <a href="#" data-bind="click: configureSettings">Configure settings</a>
        </div>
        <div>
            <a href="#" data-bind="click: addToSidebar" id="addToSidebar">Add to sidebar</a>
        </div>
        <hr />
        <div>
            <a href="https://darksky.net/poweredby/" target="_blank">Powered by Dark Sky</a>
        </div>
    </div>
</body>
</html>
